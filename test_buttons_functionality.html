<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Button Functionality Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #2c1810;
            color: #f5f5dc;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #8d6e63;
            border-radius: 8px;
        }
        .test-button {
            background: #ffd700;
            color: #2c1810;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
        }
        .test-button:hover {
            background: #ffb300;
        }
        .result {
            margin: 10px 0;
            padding: 10px;
            background: rgba(139, 110, 99, 0.2);
            border-radius: 4px;
        }
        .success { color: #4caf50; }
        .error { color: #f44336; }
    </style>
</head>
<body>
    <h1>üîß Button Functionality Test</h1>
    
    <div class="test-section">
        <h2>1. Basic JavaScript Test</h2>
        <button class="test-button" onclick="testBasicJS()">Test Basic JavaScript</button>
        <div id="basic-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>2. Event Handler Test</h2>
        <button class="test-button" id="event-test">Test Event Handlers</button>
        <div id="event-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>3. API Connection Test</h2>
        <button class="test-button" onclick="testAPI()">Test API Connection</button>
        <div id="api-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>4. React App Test</h2>
        <button class="test-button" onclick="testReactApp()">Test React App Loading</button>
        <div id="react-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>5. Console Error Check</h2>
        <button class="test-button" onclick="checkErrors()">Check Console Errors</button>
        <div id="error-result" class="result"></div>
    </div>

    <script>
        // Store console errors
        window.testErrors = [];
        const originalError = console.error;
        console.error = function(...args) {
            window.testErrors.push(args.join(' '));
            originalError.apply(console, args);
        };

        function testBasicJS() {
            const result = document.getElementById('basic-result');
            result.innerHTML = '<span class="success">‚úÖ JavaScript is working correctly!</span>';
            result.innerHTML += '<br>Date: ' + new Date().toLocaleTimeString();
        }

        function testAPI() {
            const result = document.getElementById('api-result');
            result.innerHTML = '‚è≥ Testing API connection...';
            
            fetch('/api/auth/session')
                .then(response => response.json())
                .then(data => {
                    result.innerHTML = '<span class="success">‚úÖ API working: ' + JSON.stringify(data).substring(0, 50) + '...</span>';
                })
                .catch(error => {
                    result.innerHTML = '<span class="error">‚ùå API Error: ' + error.message + '</span>';
                });
        }

        function testReactApp() {
            const result = document.getElementById('react-result');
            
            // Check if React root exists
            const rootElement = document.querySelector('#root');
            if (rootElement) {
                const hasContent = rootElement.innerHTML.trim().length > 0;
                if (hasContent) {
                    result.innerHTML = '<span class="success">‚úÖ React app appears to be loaded</span>';
                    result.innerHTML += '<br>Root content length: ' + rootElement.innerHTML.length;
                } else {
                    result.innerHTML = '<span class="error">‚ùå React app root is empty</span>';
                }
            } else {
                result.innerHTML = '<span class="error">‚ùå React root element not found</span>';
            }
        }

        function checkErrors() {
            const result = document.getElementById('error-result');
            if (window.testErrors.length === 0) {
                result.innerHTML = '<span class="success">‚úÖ No console errors detected</span>';
            } else {
                result.innerHTML = '<span class="error">‚ùå Console errors found:</span><br>';
                window.testErrors.forEach(error => {
                    result.innerHTML += '‚Ä¢ ' + error + '<br>';
                });
            }
        }

        // Event handler test
        document.addEventListener('DOMContentLoaded', function() {
            const eventButton = document.getElementById('event-test');
            const eventResult = document.getElementById('event-result');
            
            eventButton.addEventListener('click', function() {
                eventResult.innerHTML = '<span class="success">‚úÖ Event handlers working correctly!</span>';
                eventResult.innerHTML += '<br>Click detected at: ' + new Date().toLocaleTimeString();
            });
        });

        // Auto-run tests after page load
        window.addEventListener('load', function() {
            setTimeout(() => {
                testBasicJS();
                testAPI();
                testReactApp();
                checkErrors();
            }, 1000);
        });
    </script>
</body>
</html>